{"version":3,"file":"index.mjs","sources":["../../admin/src/pluginId.ts","../../admin/src/components/Initializer/index.tsx","../../admin/src/config.ts","../../admin/src/constants.ts","../../admin/src/utils/prefixKey.ts","../../node_modules/@dnd-kit/utilities/dist/utilities.esm.js","../../node_modules/@dnd-kit/modifiers/dist/modifiers.esm.js","../../admin/src/components/SortableListItemLayout/index.tsx","../../admin/src/components/SortableListItem/index.tsx","../../admin/src/components/SortableList/index.tsx","../../admin/src/components/SortModalBody/index.tsx","../../admin/src/components/SortModal/index.tsx","../../admin/src/components/SortModalContainer/index.tsx","../../admin/src/index.ts"],"sourcesContent":["export const PLUGIN_ID = 'sortable-entries';\n","import { useEffect, useRef } from 'react';\n\nimport { PLUGIN_ID } from '../../pluginId';\n\ntype InitializerProps = {\n  setPlugin: (id: string) => void;\n};\n\nconst Initializer = ({ setPlugin }: InitializerProps) => {\n  const ref = useRef(setPlugin);\n\n  useEffect(() => {\n    ref.current(PLUGIN_ID);\n  }, []);\n\n  return null;\n};\n\nexport default Initializer;\n","export const config = {\n  /**\n   * The database field containing the order of the sorted entries.\n   *\n   * - Note: Unfortunatly there is no easy way to share the configuration between the admin- and server-side code,\n   *         so we need to duplicate the config here for now.\n   */\n  sortOrderField: 'sortOrder',\n} as const;\n","/**\n * Represents the status of an asynchronous fetch operation.\n *\n * @see FetchState\n */\nexport enum FetchStatus {\n  Initial = 'initial',\n  Loading = 'loading',\n  Resolved = 'resolved',\n  Failed = 'failed',\n}\n","import { PLUGIN_ID } from '../pluginId';\n\n// This function was originally called `getTranslation(id:)` (generated by `npx @strapi/sdk-plugin init`),\n// but has been renamed to `prefixKey(key:)` because it doesn't return a translation.\nconst prefixKey = (key: string) => `${PLUGIN_ID}.${key}`;\n\nexport { prefixKey };\n","import { useMemo, useLayoutEffect, useEffect, useRef, useCallback } from 'react';\n\nfunction useCombinedRefs() {\n  for (var _len = arguments.length, refs = new Array(_len), _key = 0; _key < _len; _key++) {\n    refs[_key] = arguments[_key];\n  }\n\n  return useMemo(() => node => {\n    refs.forEach(ref => ref(node));\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  refs);\n}\n\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nconst canUseDOM = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined';\n\nfunction isWindow(element) {\n  const elementString = Object.prototype.toString.call(element);\n  return elementString === '[object Window]' || // In Electron context the Window object serializes to [object global]\n  elementString === '[object global]';\n}\n\nfunction isNode(node) {\n  return 'nodeType' in node;\n}\n\nfunction getWindow(target) {\n  var _target$ownerDocument, _target$ownerDocument2;\n\n  if (!target) {\n    return window;\n  }\n\n  if (isWindow(target)) {\n    return target;\n  }\n\n  if (!isNode(target)) {\n    return window;\n  }\n\n  return (_target$ownerDocument = (_target$ownerDocument2 = target.ownerDocument) == null ? void 0 : _target$ownerDocument2.defaultView) != null ? _target$ownerDocument : window;\n}\n\nfunction isDocument(node) {\n  const {\n    Document\n  } = getWindow(node);\n  return node instanceof Document;\n}\n\nfunction isHTMLElement(node) {\n  if (isWindow(node)) {\n    return false;\n  }\n\n  return node instanceof getWindow(node).HTMLElement;\n}\n\nfunction isSVGElement(node) {\n  return node instanceof getWindow(node).SVGElement;\n}\n\nfunction getOwnerDocument(target) {\n  if (!target) {\n    return document;\n  }\n\n  if (isWindow(target)) {\n    return target.document;\n  }\n\n  if (!isNode(target)) {\n    return document;\n  }\n\n  if (isDocument(target)) {\n    return target;\n  }\n\n  if (isHTMLElement(target) || isSVGElement(target)) {\n    return target.ownerDocument;\n  }\n\n  return document;\n}\n\n/**\r\n * A hook that resolves to useEffect on the server and useLayoutEffect on the client\r\n * @param callback {function} Callback function that is invoked when the dependencies of the hook change\r\n */\n\nconst useIsomorphicLayoutEffect = canUseDOM ? useLayoutEffect : useEffect;\n\nfunction useEvent(handler) {\n  const handlerRef = useRef(handler);\n  useIsomorphicLayoutEffect(() => {\n    handlerRef.current = handler;\n  });\n  return useCallback(function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return handlerRef.current == null ? void 0 : handlerRef.current(...args);\n  }, []);\n}\n\nfunction useInterval() {\n  const intervalRef = useRef(null);\n  const set = useCallback((listener, duration) => {\n    intervalRef.current = setInterval(listener, duration);\n  }, []);\n  const clear = useCallback(() => {\n    if (intervalRef.current !== null) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n  return [set, clear];\n}\n\nfunction useLatestValue(value, dependencies) {\n  if (dependencies === void 0) {\n    dependencies = [value];\n  }\n\n  const valueRef = useRef(value);\n  useIsomorphicLayoutEffect(() => {\n    if (valueRef.current !== value) {\n      valueRef.current = value;\n    }\n  }, dependencies);\n  return valueRef;\n}\n\nfunction useLazyMemo(callback, dependencies) {\n  const valueRef = useRef();\n  return useMemo(() => {\n    const newValue = callback(valueRef.current);\n    valueRef.current = newValue;\n    return newValue;\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [...dependencies]);\n}\n\nfunction useNodeRef(onChange) {\n  const onChangeHandler = useEvent(onChange);\n  const node = useRef(null);\n  const setNodeRef = useCallback(element => {\n    if (element !== node.current) {\n      onChangeHandler == null ? void 0 : onChangeHandler(element, node.current);\n    }\n\n    node.current = element;\n  }, //eslint-disable-next-line\n  []);\n  return [node, setNodeRef];\n}\n\nfunction usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n\nlet ids = {};\nfunction useUniqueId(prefix, value) {\n  return useMemo(() => {\n    if (value) {\n      return value;\n    }\n\n    const id = ids[prefix] == null ? 0 : ids[prefix] + 1;\n    ids[prefix] = id;\n    return prefix + \"-\" + id;\n  }, [prefix, value]);\n}\n\nfunction createAdjustmentFn(modifier) {\n  return function (object) {\n    for (var _len = arguments.length, adjustments = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      adjustments[_key - 1] = arguments[_key];\n    }\n\n    return adjustments.reduce((accumulator, adjustment) => {\n      const entries = Object.entries(adjustment);\n\n      for (const [key, valueAdjustment] of entries) {\n        const value = accumulator[key];\n\n        if (value != null) {\n          accumulator[key] = value + modifier * valueAdjustment;\n        }\n      }\n\n      return accumulator;\n    }, { ...object\n    });\n  };\n}\n\nconst add = /*#__PURE__*/createAdjustmentFn(1);\nconst subtract = /*#__PURE__*/createAdjustmentFn(-1);\n\nfunction hasViewportRelativeCoordinates(event) {\n  return 'clientX' in event && 'clientY' in event;\n}\n\nfunction isKeyboardEvent(event) {\n  if (!event) {\n    return false;\n  }\n\n  const {\n    KeyboardEvent\n  } = getWindow(event.target);\n  return KeyboardEvent && event instanceof KeyboardEvent;\n}\n\nfunction isTouchEvent(event) {\n  if (!event) {\n    return false;\n  }\n\n  const {\n    TouchEvent\n  } = getWindow(event.target);\n  return TouchEvent && event instanceof TouchEvent;\n}\n\n/**\r\n * Returns the normalized x and y coordinates for mouse and touch events.\r\n */\n\nfunction getEventCoordinates(event) {\n  if (isTouchEvent(event)) {\n    if (event.touches && event.touches.length) {\n      const {\n        clientX: x,\n        clientY: y\n      } = event.touches[0];\n      return {\n        x,\n        y\n      };\n    } else if (event.changedTouches && event.changedTouches.length) {\n      const {\n        clientX: x,\n        clientY: y\n      } = event.changedTouches[0];\n      return {\n        x,\n        y\n      };\n    }\n  }\n\n  if (hasViewportRelativeCoordinates(event)) {\n    return {\n      x: event.clientX,\n      y: event.clientY\n    };\n  }\n\n  return null;\n}\n\nconst CSS = /*#__PURE__*/Object.freeze({\n  Translate: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      const {\n        x,\n        y\n      } = transform;\n      return \"translate3d(\" + (x ? Math.round(x) : 0) + \"px, \" + (y ? Math.round(y) : 0) + \"px, 0)\";\n    }\n\n  },\n  Scale: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      const {\n        scaleX,\n        scaleY\n      } = transform;\n      return \"scaleX(\" + scaleX + \") scaleY(\" + scaleY + \")\";\n    }\n\n  },\n  Transform: {\n    toString(transform) {\n      if (!transform) {\n        return;\n      }\n\n      return [CSS.Translate.toString(transform), CSS.Scale.toString(transform)].join(' ');\n    }\n\n  },\n  Transition: {\n    toString(_ref) {\n      let {\n        property,\n        duration,\n        easing\n      } = _ref;\n      return property + \" \" + duration + \"ms \" + easing;\n    }\n\n  }\n});\n\nconst SELECTOR = 'a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]';\nfunction findFirstFocusableNode(element) {\n  if (element.matches(SELECTOR)) {\n    return element;\n  }\n\n  return element.querySelector(SELECTOR);\n}\n\nexport { CSS, add, canUseDOM, findFirstFocusableNode, getEventCoordinates, getOwnerDocument, getWindow, hasViewportRelativeCoordinates, isDocument, isHTMLElement, isKeyboardEvent, isNode, isSVGElement, isTouchEvent, isWindow, subtract, useCombinedRefs, useEvent, useInterval, useIsomorphicLayoutEffect, useLatestValue, useLazyMemo, useNodeRef, usePrevious, useUniqueId };\n//# sourceMappingURL=utilities.esm.js.map\n","import { getEventCoordinates } from '@dnd-kit/utilities';\n\nfunction createSnapModifier(gridSize) {\n  return _ref => {\n    let {\n      transform\n    } = _ref;\n    return { ...transform,\n      x: Math.ceil(transform.x / gridSize) * gridSize,\n      y: Math.ceil(transform.y / gridSize) * gridSize\n    };\n  };\n}\n\nconst restrictToHorizontalAxis = _ref => {\n  let {\n    transform\n  } = _ref;\n  return { ...transform,\n    y: 0\n  };\n};\n\nfunction restrictToBoundingRect(transform, rect, boundingRect) {\n  const value = { ...transform\n  };\n\n  if (rect.top + transform.y <= boundingRect.top) {\n    value.y = boundingRect.top - rect.top;\n  } else if (rect.bottom + transform.y >= boundingRect.top + boundingRect.height) {\n    value.y = boundingRect.top + boundingRect.height - rect.bottom;\n  }\n\n  if (rect.left + transform.x <= boundingRect.left) {\n    value.x = boundingRect.left - rect.left;\n  } else if (rect.right + transform.x >= boundingRect.left + boundingRect.width) {\n    value.x = boundingRect.left + boundingRect.width - rect.right;\n  }\n\n  return value;\n}\n\nconst restrictToParentElement = _ref => {\n  let {\n    containerNodeRect,\n    draggingNodeRect,\n    transform\n  } = _ref;\n\n  if (!draggingNodeRect || !containerNodeRect) {\n    return transform;\n  }\n\n  return restrictToBoundingRect(transform, draggingNodeRect, containerNodeRect);\n};\n\nconst restrictToFirstScrollableAncestor = _ref => {\n  let {\n    draggingNodeRect,\n    transform,\n    scrollableAncestorRects\n  } = _ref;\n  const firstScrollableAncestorRect = scrollableAncestorRects[0];\n\n  if (!draggingNodeRect || !firstScrollableAncestorRect) {\n    return transform;\n  }\n\n  return restrictToBoundingRect(transform, draggingNodeRect, firstScrollableAncestorRect);\n};\n\nconst restrictToVerticalAxis = _ref => {\n  let {\n    transform\n  } = _ref;\n  return { ...transform,\n    x: 0\n  };\n};\n\nconst restrictToWindowEdges = _ref => {\n  let {\n    transform,\n    draggingNodeRect,\n    windowRect\n  } = _ref;\n\n  if (!draggingNodeRect || !windowRect) {\n    return transform;\n  }\n\n  return restrictToBoundingRect(transform, draggingNodeRect, windowRect);\n};\n\nconst snapCenterToCursor = _ref => {\n  let {\n    activatorEvent,\n    draggingNodeRect,\n    transform\n  } = _ref;\n\n  if (draggingNodeRect && activatorEvent) {\n    const activatorCoordinates = getEventCoordinates(activatorEvent);\n\n    if (!activatorCoordinates) {\n      return transform;\n    }\n\n    const offsetX = activatorCoordinates.x - draggingNodeRect.left;\n    const offsetY = activatorCoordinates.y - draggingNodeRect.top;\n    return { ...transform,\n      x: transform.x + offsetX - draggingNodeRect.width / 2,\n      y: transform.y + offsetY - draggingNodeRect.height / 2\n    };\n  }\n\n  return transform;\n};\n\nexport { createSnapModifier, restrictToFirstScrollableAncestor, restrictToHorizontalAxis, restrictToParentElement, restrictToVerticalAxis, restrictToWindowEdges, snapCenterToCursor };\n//# sourceMappingURL=modifiers.esm.js.map\n","import { Box, Flex } from '@strapi/design-system';\n\n/**\n * A layout wrapper component designed for use within the sortable list UI.\n * It helps to ensure sortable list items have uniform spacing and layout alignment.\n */\nconst SortableListItemLayout = ({ children }: React.PropsWithChildren) => (\n  <Box marginTop={4} marginBottom={4} marginRight={5} marginLeft={5}>\n    <Flex gap={4}>{children}</Flex>\n  </Box>\n);\n\nexport default SortableListItemLayout;\n","import { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\n\nimport { Typography } from '@strapi/design-system';\nimport { Drag } from '@strapi/icons';\n\nimport styled from 'styled-components';\n\nimport SortableListItemLayout from '../SortableListItemLayout';\n\n//\n// Types\n//\n\nimport type { UniqueIdentifier } from '../../types';\n\n// Fixes the error \"Property `colors` does not exist on type `DefaultTheme`\" on the style below.\ninterface Theme {\n  colors: {\n    [key: string]: string | number;\n  };\n}\n\n//\n// Components\n//\n\n/**\n * A list item showing a divider at the top.\n *\n * - See also: https://github.com/strapi/design-system/blob/main/packages/design-system/src/components/Table/Table.tsx\n */\nconst DividedListItem = styled.li`\n  border-top: 1px solid ${({ theme }) => theme.colors.neutral150};\n  background: ${({ theme }) => theme.colors.neutral0};\n`;\n\n/**\n * A single item in the sortable list.\n *\n * @param id - The unique identifier of the list item.\n * @param label - The title to show in the list item.\n */\nconst SortableListItem = ({ id, label }: { id: UniqueIdentifier; label: string }) => {\n  // Based on:\n  // https://docs.dndkit.com/presets/sortable\n  const { attributes, isDragging, listeners, setNodeRef, transform, transition } = useSortable({\n    id,\n  });\n\n  // Providing a dedicated type here fixes the error \"Type `string` is not assignable to type `Position`\".\n  // https://stackoverflow.com/a/73946106\n  const style: React.CSSProperties = {\n    transform: CSS.Transform.toString(transform),\n    transition: transition,\n    // Based on:\n    // https://github.com/clauderic/dnd-kit/issues/1466\n    position: isDragging ? 'relative' : 'inherit',\n    zIndex: isDragging ? 1000 : 0,\n  };\n\n  return (\n    <DividedListItem ref={setNodeRef} style={style} {...attributes} {...listeners}>\n      <SortableListItemLayout>\n        <Drag />\n        <Typography variant=\"omega\">{label}</Typography>\n      </SortableListItemLayout>\n    </DividedListItem>\n  );\n};\n\nexport default SortableListItem;\n","import {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n} from '@dnd-kit/core';\nimport { restrictToVerticalAxis } from '@dnd-kit/modifiers';\nimport {\n  SortableContext,\n  sortableKeyboardCoordinates,\n  verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\n\nimport { Typography } from '@strapi/design-system';\nimport { Drag } from '@strapi/icons';\n\nimport styled from 'styled-components';\n\nimport SortableListItem from '../SortableListItem';\nimport SortableListItemLayout from '../SortableListItemLayout';\n\n//\n// Types\n//\n\nimport type { DragEndEvent as DNDKitDragEndEvent } from '@dnd-kit/core';\nimport type { DragEndEvent, SortableList } from 'src/types';\n\n// Fixes the error \"Property `colors` does not exist on type `DefaultTheme`\" on the style below.\ninterface Theme {\n  colors: {\n    [key: string]: string | number;\n  };\n}\n\n//\n// Components\n//\n\n/**\n * The bordered container for the sortable list.\n *\n * - See also: https://github.com/strapi/design-system/blob/main/packages/design-system/src/components/Table/Table.tsx\n */\nconst Container = styled.div`\n  border: 1px solid ${({ theme }) => theme.colors.neutral150};\n  border-radius: 4px;\n`;\n\nconst FadeableList = styled.ul<{ disabled: boolean }>`\n  opacity: ${({ disabled }) => (disabled ? 0.4 : 1)};\n`;\n\n/**\n * A sortable list.\n *\n * @param list - The list that should be sorted.\n * @param onDragEnd - The event handler that is called on drag end.\n * @param disabled - Boolean flag whether sorting is disabled.\n * @param heading - The heading displayed above the sortable list.\n */\nconst SortableList = ({\n  list,\n  onDragEnd,\n  disabled,\n  heading,\n}: {\n  list: SortableList;\n  onDragEnd: DragEndEvent;\n  disabled: boolean;\n  heading: string;\n}) => {\n  // Based on:\n  // https://docs.dndkit.com/presets/sortable\n  const sensors = useSensors(\n    useSensor(PointerSensor),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  const handleDragEnd = (event: DNDKitDragEndEvent) => {\n    const { active, over } = event;\n    if (!over) {\n      return;\n    }\n\n    if (active.id === over.id) {\n      return;\n    }\n\n    onDragEnd(active.id, over.id);\n  };\n\n  return (\n    <Container>\n      <DndContext\n        sensors={sensors}\n        collisionDetection={closestCenter}\n        modifiers={[restrictToVerticalAxis]}\n        onDragEnd={handleDragEnd}\n      >\n        <SortableContext items={list} strategy={verticalListSortingStrategy} disabled={disabled}>\n          <SortableListItemLayout>\n            <Drag fill=\"neutral600\" />\n            <Typography variant=\"sigma\" textColor=\"neutral600\">\n              {heading}\n            </Typography>\n          </SortableListItemLayout>\n          <FadeableList disabled={disabled}>\n            {list.map((listItem) => (\n              <SortableListItem key={listItem.id} id={listItem.id} label={listItem.label} />\n            ))}\n          </FadeableList>\n        </SortableContext>\n      </DndContext>\n    </Container>\n  );\n};\n\nexport default SortableList;\n","import { EmptyStateLayout, Loader } from '@strapi/design-system';\n\nimport { useIntl } from 'react-intl';\n\nimport { FetchStatus } from '../../constants';\nimport { prefixKey } from '../../utils/prefixKey';\nimport SortableListComponent from '../SortableList';\n\n//\n// Types\n//\n\nimport type { DragEndEvent, EntriesFetchState, SortableList } from 'src/types';\n\n//\n// Helpers\n//\n\n/**\n * Checks if a field is a system field (not a user-defined field).\n */\nconst isSystemField = (fieldName: string): boolean => {\n  const systemFields = [\n    'documentId',\n    'id',\n    'createdAt',\n    'updatedAt',\n    'publishedAt',\n    'createdBy',\n    'updatedBy',\n    'locale',\n    'localizations',\n  ];\n  return systemFields.includes(fieldName);\n};\n\n/**\n * Gets all relation fields from contentType attributes.\n */\nconst getRelationFields = (contentType: any): string[] => {\n  if (!contentType || !contentType.attributes) {\n    return [];\n  }\n  const relationFields: string[] = [];\n  Object.keys(contentType.attributes).forEach((fieldName) => {\n    const attribute = contentType.attributes[fieldName];\n    if (\n      attribute.type === 'relation' ||\n      attribute.type === 'media' ||\n      (attribute.type && typeof attribute.type === 'string' && attribute.type.includes('relation'))\n    ) {\n      relationFields.push(fieldName);\n    }\n  });\n  return relationFields;\n};\n\n/**\n * Gets a display label from a relation object.\n * Tries to find a meaningful field (title, name, etc.) or falls back to documentId.\n */\nconst getRelationDisplayValue = (relationItem: any): string => {\n  // Handle case where relationItem is just an ID (string or number)\n  // This happens when backend doesn't populate relation fields\n  if (typeof relationItem === 'string' || typeof relationItem === 'number') {\n    return String(relationItem);\n  }\n\n  if (typeof relationItem !== 'object' || relationItem === null) {\n    return String(relationItem);\n  }\n\n  // Try common display fields first (expanded list)\n  const displayFields = [\n    'title',\n    'name',\n    'label',\n    'slug',\n    'code',\n    'description',\n    'text',\n    'value',\n    'displayName',\n    'display_name',\n  ];\n  for (const field of displayFields) {\n    const value = relationItem[field];\n    if (value !== null && value !== undefined && value !== '') {\n      return String(value);\n    }\n  }\n  // Try to find any string field that might be a display field\n  // (excluding system fields and objects)\n  for (const key in relationItem) {\n    if (\n      relationItem.hasOwnProperty(key) &&\n      typeof relationItem[key] === 'string' &&\n      relationItem[key] !== '' &&\n      !['documentId', 'id', 'createdAt', 'updatedAt', 'publishedAt'].includes(key)\n    ) {\n      return relationItem[key];\n    }\n  }\n  // Fall back to documentId or id\n  return relationItem.documentId || relationItem.id || 'Unknown';\n};\n\n/**\n * Formats the label from relation fields.\n * If multiple relation fields exist, joins them with a hyphen.\n */\nconst formatRelationLabel = (entry: any, relationFields: string[]): string => {\n  const labels: string[] = [];\n  relationFields.forEach((fieldName) => {\n    const relationValue = entry[fieldName];\n    if (relationValue) {\n      if (Array.isArray(relationValue)) {\n        const arrayLabels = relationValue\n          .map((item: any) => getRelationDisplayValue(item))\n          .filter((label: string) => label && label !== 'Unknown');\n        if (arrayLabels.length > 0) {\n          labels.push(arrayLabels.join(', '));\n        }\n      } else if (typeof relationValue === 'object' && relationValue !== null) {\n        const displayValue = getRelationDisplayValue(relationValue);\n        if (displayValue && displayValue !== 'Unknown') {\n          labels.push(displayValue);\n        }\n      } else if (relationValue !== null && relationValue !== undefined && relationValue !== '') {\n        // Handle primitive values (shouldn't happen with proper populate, but just in case)\n        labels.push(String(relationValue));\n      }\n    }\n  });\n  return labels.length > 0 ? labels.join(' - ') : '';\n};\n\n//\n// Components\n//\n\n/**\n * Returns different elements for the modal body, depending on the current fetch status.\n *\n * @param entriesFetchState - The state for fetching the entries.\n * @param mainField - The displayed field of each entry in the collection type.\n * @param contentType - The content type configuration.\n * @param handleDragEnd - The event handler that is called on drag end.\n * @param disabled - Boolean flag whether sorting is disabled.\n */\nconst SortModalBody = ({\n  entriesFetchState,\n  mainField,\n  contentType,\n  handleDragEnd,\n  disabled,\n}: {\n  entriesFetchState: EntriesFetchState;\n  mainField: string;\n  contentType: any;\n  handleDragEnd: DragEndEvent;\n  disabled: boolean;\n}) => {\n  const { formatMessage } = useIntl();\n  const translate = (key: string): string => formatMessage({ id: prefixKey(key) });\n\n  switch (entriesFetchState.status) {\n    case FetchStatus.Initial:\n    case FetchStatus.Loading:\n      return <Loader />;\n\n    case FetchStatus.Failed:\n      return <EmptyStateLayout content={translate('empty-state.failure')} />;\n\n    case FetchStatus.Resolved:\n      const entries = entriesFetchState.value;\n      if (entries.length === 0) {\n        return <EmptyStateLayout content={translate('empty-state.noContent')} />;\n      }\n\n      // Check if mainField is a system field or doesn't exist in contentType attributes\n      const hasMainFieldInAttributes =\n        contentType?.attributes && mainField in contentType.attributes;\n      const isMainFieldSystem = isSystemField(mainField);\n\n      // Only use relation fields if mainField is a system field AND we have relation fields available\n      // Otherwise, try to use mainField first\n      const relationFields = getRelationFields(contentType);\n      const shouldUseRelationFields = isMainFieldSystem && relationFields.length > 0;\n\n      // Debug logging (remove in production)\n      if (process.env.NODE_ENV === 'development') {\n        console.log('[SortModalBody] Debug info:', {\n          mainField,\n          isMainFieldSystem,\n          relationFields,\n          shouldUseRelationFields,\n          firstEntry: entries[0],\n          firstEntryRelations: relationFields.reduce(\n            (acc, field) => {\n              acc[field] = entries[0]?.[field];\n              return acc;\n            },\n            {} as Record<string, any>\n          ),\n        });\n      }\n\n      // Converts the data-models into view-models for the `<SortableList />` component.\n      const sortableList: SortableList = entries.map((entry) => {\n        let label: string;\n\n        // First, try to use mainField if it's not a system field and has a value\n        if (!isMainFieldSystem) {\n          const mainFieldValue = entry[mainField];\n          if (mainFieldValue !== null && mainFieldValue !== undefined && mainFieldValue !== '') {\n            label = String(mainFieldValue);\n          } else if (shouldUseRelationFields && relationFields.length > 0) {\n            // Fallback to relation fields if mainField is empty\n            label = formatRelationLabel(entry, relationFields);\n            if (!label) {\n              label = `Entry ${entry.documentId}`;\n            }\n          } else {\n            label = `Entry ${entry.documentId}`;\n          }\n        } else if (shouldUseRelationFields && relationFields.length > 0) {\n          // Use relation fields if mainField is a system field\n          // Format: \"categoryName - templateName\" or just one if the other is missing\n          label = formatRelationLabel(entry, relationFields);\n          if (!label || label.trim() === '') {\n            // If no label from relations, check if relations exist but are empty/null\n            const hasAnyRelation = relationFields.some((field) => {\n              const value = entry[field];\n              return value !== null && value !== undefined;\n            });\n            if (hasAnyRelation) {\n              // Relations exist but couldn't extract display value\n              // Try to show documentId with a note\n              label = `Entry ${entry.documentId}`;\n            } else {\n              // No relations at all\n              label = `Entry ${entry.documentId}`;\n            }\n          }\n        } else {\n          // Last resort: use documentId\n          label = `Entry ${entry.documentId}`;\n        }\n\n        return {\n          id: entry.documentId,\n          label,\n        };\n      });\n\n      const heading =\n        shouldUseRelationFields && relationFields.length > 0 ? relationFields.join('-') : mainField;\n\n      return (\n        <SortableListComponent\n          list={sortableList}\n          onDragEnd={handleDragEnd}\n          disabled={disabled}\n          heading={heading}\n        />\n      );\n  }\n};\n\nexport default SortModalBody;\n","import { arrayMove } from '@dnd-kit/sortable';\nimport { useEffect, useState, useMemo, useCallback } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { useSearchParams } from 'react-router-dom';\n\nimport { useFetchClient, useNotification, useQueryParams } from '@strapi/strapi/admin';\nimport { Button, IconButton, Modal, Box, Typography } from '@strapi/design-system';\nimport { Drag } from '@strapi/icons';\n\nimport { FetchStatus } from '../../constants';\nimport { prefixKey } from '../../utils/prefixKey';\nimport SortModalBody from '../SortModalBody';\n\n//\n// Types\n//\n\nimport type { UID as StrapiUID } from '@strapi/strapi';\nimport type { Entries, DragEndEvent, EntriesFetchState, UniqueIdentifier } from 'src/types';\n\n//\n// Config\n//\n\nconst config = {\n  /** The configuration for the fetch entries request. */\n  fetchEntriesRequest: {\n    /** The path to fetch the entries of the collection type with the given `uid`. */\n    path: (uid: string) => `/sortable-entries/fetch-entries/${uid}`,\n  },\n\n  /** The configuration for the update sort order request. */\n  updateSortOrderRequest: {\n    /** The path to update the sort order of the collection type with the given `uid`. */\n    path: (uid: string) => `/sortable-entries/update-sort-order/${uid}`,\n  },\n};\n\n//\n// Components\n//\n\ntype SortMode = 'global' | 'scoped';\n\ninterface SortModalProps {\n  uid: StrapiUID.ContentType;\n  mainField: string;\n  contentType: any;\n  mode?: SortMode;\n  label?: string;\n}\n\n/**\n * A modal component that retrieves entries from the current collection type,\n * presents them in a sortable list, and enables saving changes via a submit button.\n *\n * @param uid - The unique identifier of the content type which entries are sorted.\n * @param mainField - The displayed field of each entry in the collection type.\n * @param contentType - The content type configuration.\n * @param mode - The sort mode: `\"global\"` for legacy behaviour or `\"scoped\"` for scoped sort within active filters.\n * @param label - Optional label for the trigger button (mainly used for scoped mode).\n */\nconst SortModal = ({ uid, mainField, contentType, mode = 'global', label }: SortModalProps) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const { toggleNotification } = useNotification();\n  const { formatMessage } = useIntl();\n  const translate = (key: string): string => formatMessage({ id: prefixKey(key) });\n\n  const fetchClient = useFetchClient();\n  const [entriesFetchState, setEntriesFetchState] = useState<EntriesFetchState>({\n    status: FetchStatus.Initial,\n  });\n\n  // Scoped filter selection state\n  const [selectedFilterField, setSelectedFilterField] = useState<string>('');\n  const [selectedFilterValue, setSelectedFilterValue] = useState<string>('');\n  const [filterOptions, setFilterOptions] = useState<Array<{ id: string; label: string }>>([]);\n  const [isLoadingOptions, setIsLoadingOptions] = useState(false);\n\n  const initialParams = { filters: undefined, plugins: { i18n: { locale: undefined } } };\n  const [queryParams, _] = useQueryParams(initialParams);\n  const listViewFilters = queryParams.query.filters;\n  const locale = queryParams.query.plugins.i18n.locale;\n\n  /**\n   * Builds a Strapi filter object from selected field and value.\n   * For relation fields in Strapi v5, need to filter by documentId nested.\n   */\n  const buildFilterFromSelection = (field: string, value: string): any => {\n    // Check if field is a relation field\n    const isRelationField = contentType?.attributes?.[field]?.type === 'relation';\n\n    if (isRelationField) {\n      // For relation fields in Strapi v5, filter by documentId nested\n      // Format: { field: { documentId: { $in: [value] } } }\n      return {\n        [field]: {\n          documentId: {\n            $in: [value],\n          },\n        },\n      };\n    }\n\n    // For non-relation fields, use $contains\n    return {\n      [field]: {\n        $contains: [value],\n      },\n    };\n  };\n\n  // Use selected filter for scoped mode, otherwise use list view filters\n  const filters = useMemo(() => {\n    if (mode === 'scoped' && selectedFilterField && selectedFilterValue) {\n      return buildFilterFromSelection(selectedFilterField, selectedFilterValue);\n    }\n    return listViewFilters;\n  }, [mode, selectedFilterField, selectedFilterValue, listViewFilters]);\n\n  /**\n   * Fetches available options for a relation field.\n   */\n  const fetchFilterOptions = useCallback(\n    async (fieldName: string) => {\n      if (!fieldName || !contentType?.attributes?.[fieldName]) {\n        setFilterOptions([]);\n        return;\n      }\n\n      setIsLoadingOptions(true);\n      try {\n        const attribute = contentType.attributes[fieldName];\n        if (attribute.type !== 'relation' || !attribute.target) {\n          setFilterOptions([]);\n          return;\n        }\n\n        // Extract target UID from attribute (e.g., \"api::test-category.test-category\")\n        const targetUid = attribute.target;\n\n        // Fetch entries from the target collection using Strapi's document API\n        // Limit to 100 entries to avoid performance issues\n        const targetEntries = await fetchClient.get(\n          `/content-manager/collection-types/${targetUid}`,\n          {\n            params: {\n              pageSize: 100, // Limit to 100 options to avoid lag\n              sort: 'name:asc', // Sort by name if available\n            },\n          }\n        );\n\n        // Handle different response formats\n        const entries = targetEntries?.data?.results || targetEntries?.data || [];\n\n        // Map to options format\n        const options = entries.map((entry: any) => {\n          // Try to find a display field (name, title, etc.)\n          const displayValue =\n            entry.name || entry.title || entry.label || entry.documentId || String(entry.id);\n          return {\n            id: entry.documentId || String(entry.id),\n            label: displayValue,\n          };\n        });\n\n        setFilterOptions(options);\n      } catch (error) {\n        console.error('Failed to fetch filter options:', error);\n        setFilterOptions([]);\n      } finally {\n        setIsLoadingOptions(false);\n      }\n    },\n    [contentType, fetchClient]\n  );\n\n  /**\n   * Checks if a field is a system field (not a user-defined field).\n   */\n  const isSystemField = (fieldName: string): boolean => {\n    const systemFields = [\n      'documentId',\n      'id',\n      'createdAt',\n      'updatedAt',\n      'publishedAt',\n      'createdBy',\n      'updatedBy',\n      'locale',\n      'localizations',\n    ];\n    return systemFields.includes(fieldName);\n  };\n\n  /**\n   * Gets all relation fields from contentType attributes.\n   */\n  const getRelationFieldsMemo = useMemo(() => {\n    if (!contentType || !contentType.attributes) {\n      return [];\n    }\n    const relationFields: string[] = [];\n    Object.keys(contentType.attributes).forEach((fieldName) => {\n      const attribute = contentType.attributes[fieldName];\n      if (\n        attribute.type === 'relation' ||\n        attribute.type === 'media' ||\n        (attribute.type &&\n          typeof attribute.type === 'string' &&\n          attribute.type.includes('relation'))\n      ) {\n        relationFields.push(fieldName);\n      }\n    });\n    return relationFields;\n  }, [contentType]);\n\n  /**\n   * Fetches the entries of the current collection type.\n   */\n  const fetchEntries = useCallback(async () => {\n    setEntriesFetchState({ status: FetchStatus.Loading });\n\n    try {\n      const useRelationFields = isSystemField(mainField);\n      const relationFieldsParam =\n        useRelationFields && getRelationFieldsMemo.length > 0\n          ? getRelationFieldsMemo.join(',')\n          : undefined;\n\n      const { data: entries } = await fetchClient.get<Entries>(\n        mode === 'scoped'\n          ? `/sortable-entries/fetch-entries-scoped/${uid}`\n          : config.fetchEntriesRequest.path(uid),\n        {\n          params: { mainField, filters, locale, relationFields: relationFieldsParam },\n        }\n      );\n\n      setEntriesFetchState({ status: FetchStatus.Resolved, value: entries });\n    } catch (error) {\n      console.error(`Failed to fetch data:`, error);\n      if (error instanceof Error) {\n        console.error('Error details:', {\n          message: error.message,\n          stack: error.stack,\n          response: (error as any).response?.data,\n          status: (error as any).response?.status,\n        });\n      }\n\n      // This will show a corresponding error message in the modal.\n      // We therefore don't need to trigger an extra notification here.\n      setEntriesFetchState({ status: FetchStatus.Failed });\n    }\n  }, [uid, mainField, mode, filters, locale, getRelationFieldsMemo, fetchClient]);\n\n  // Fetch filter options when field selection changes\n  useEffect(() => {\n    if (isOpen && mode === 'scoped' && selectedFilterField) {\n      fetchFilterOptions(selectedFilterField);\n    } else {\n      setFilterOptions([]);\n    }\n  }, [selectedFilterField, isOpen, mode, fetchFilterOptions]);\n\n  // Reset selections when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedFilterField('');\n      setSelectedFilterValue('');\n      setFilterOptions([]);\n    }\n  }, [isOpen]);\n\n  // Fetch the entries when modal opens or filter changes\n  useEffect(() => {\n    if (isOpen) {\n      // For scoped mode, only fetch if filter is selected\n      if (mode === 'scoped') {\n        if (selectedFilterField && selectedFilterValue) {\n          fetchEntries();\n        }\n      } else {\n        fetchEntries();\n      }\n    }\n  }, [isOpen, mode, selectedFilterField, selectedFilterValue, fetchEntries]);\n\n  /**\n   * The callback for the drag-end event.\n   *\n   * - See also: https://docs.dndkit.com/presets/sortable\n   */\n  const handleDragEnd: DragEndEvent = (activeID: UniqueIdentifier, overID: UniqueIdentifier) => {\n    setEntriesFetchState((entriesFetchState) => {\n      if (entriesFetchState.status !== FetchStatus.Resolved) {\n        return entriesFetchState;\n      }\n\n      const oldEntries = entriesFetchState.value;\n      const oldIndex = oldEntries.findIndex((entry) => entry.documentId === activeID);\n      const newIndex = oldEntries.findIndex((entry) => entry.documentId === overID);\n      const newEntries = arrayMove(oldEntries, oldIndex, newIndex);\n\n      return { status: FetchStatus.Resolved, value: newEntries };\n    });\n  };\n\n  /**\n   * The callback for the submit event.\n   */\n  const handleSubmit = async () => {\n    if (entriesFetchState.status !== FetchStatus.Resolved) {\n      console.error('Expect submit button to be disabled in a non `resolved` fetch state.');\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      // Converts the data-models into data-models for the POST request below.\n      const entries = entriesFetchState.value;\n      const sortedDocumentIds = entries.map((entry) => entry.documentId);\n\n      await fetchClient.post(\n        mode === 'scoped'\n          ? `/sortable-entries/update-sort-order-scoped/${uid}`\n          : config.updateSortOrderRequest.path(uid),\n        {\n          data: {\n            sortedDocumentIds,\n            filters,\n            locale,\n          },\n        }\n      );\n\n      setIsOpen(false);\n\n      // Workaround to refresh only the list view without reloading the entire page:\n      // Appends a timestamp-based query parameter to trigger a targeted refresh.\n      //\n      // Based on:\n      // https://stackoverflow.com/a/71466484\n      const timestamp = String(Date.now());\n      searchParams.set('t', timestamp);\n      setSearchParams(searchParams);\n    } catch (error) {\n      console.error(`Failed to submit data: ${error}`);\n\n      // We failed to submit the data.\n      // This can e.g. happen when the entries of a filtered modal are outdated.\n      toggleNotification({ type: 'danger', message: translate('notification.failure') });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const isSubmitButtonDisabled = isSubmitting || entriesFetchState.status !== FetchStatus.Resolved;\n  const isSubmitButtonLoading = isSubmitting;\n\n  return (\n    <Modal.Root open={isOpen} onOpenChange={setIsOpen}>\n      <Modal.Trigger>\n        {mode === 'scoped' && label ? (\n          <Button variant=\"secondary\" size=\"S\">\n            {label}\n          </Button>\n        ) : (\n          <IconButton>\n            <Drag />\n          </IconButton>\n        )}\n      </Modal.Trigger>\n      <Modal.Content>\n        <Modal.Header>\n          <Modal.Title>\n            <FormattedMessage id={prefixKey('title')} />\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          {mode === 'scoped' && (\n            <Box paddingBottom={4}>\n              <Box paddingBottom={3}>\n                <Typography variant=\"omega\" fontWeight=\"semiBold\" as=\"label\">\n                  Filter by field\n                </Typography>\n                <Box paddingTop={2}>\n                  <select\n                    value={selectedFilterField}\n                    onChange={(e) => {\n                      setSelectedFilterField(e.target.value);\n                      setSelectedFilterValue(''); // Reset value when field changes\n                    }}\n                    disabled={isSubmitting}\n                    style={{\n                      width: '100%',\n                      padding: '8px 12px',\n                      borderRadius: '4px',\n                      border: '1px solid #dcdce4',\n                      fontSize: '14px',\n                      backgroundColor: '#ffffff',\n                      cursor: isSubmitting ? 'not-allowed' : 'pointer',\n                    }}\n                  >\n                    <option value=\"\">Select a field to filter by</option>\n                    {getRelationFieldsMemo.map((fieldName) => (\n                      <option key={fieldName} value={fieldName}>\n                        {fieldName}\n                      </option>\n                    ))}\n                  </select>\n                </Box>\n              </Box>\n              {selectedFilterField && (\n                <Box>\n                  <Typography variant=\"omega\" fontWeight=\"semiBold\" as=\"label\">\n                    Filter value\n                  </Typography>\n                  <Box paddingTop={2}>\n                    <select\n                      value={selectedFilterValue}\n                      onChange={(e) => setSelectedFilterValue(e.target.value)}\n                      disabled={isSubmitting || isLoadingOptions || filterOptions.length === 0}\n                      style={{\n                        width: '100%',\n                        padding: '8px 12px',\n                        borderRadius: '4px',\n                        border: '1px solid #dcdce4',\n                        fontSize: '14px',\n                        backgroundColor: '#ffffff',\n                        cursor:\n                          isSubmitting || isLoadingOptions || filterOptions.length === 0\n                            ? 'not-allowed'\n                            : 'pointer',\n                      }}\n                    >\n                      <option value=\"\">\n                        {isLoadingOptions ? 'Loading options...' : 'Select a value'}\n                      </option>\n                      {filterOptions.map((option) => (\n                        <option key={option.id} value={option.id}>\n                          {option.label}\n                        </option>\n                      ))}\n                    </select>\n                  </Box>\n                </Box>\n              )}\n            </Box>\n          )}\n          {mode === 'scoped' && (!selectedFilterField || !selectedFilterValue) ? (\n            <Box padding={4}>\n              <Typography variant=\"omega\" textColor=\"neutral600\">\n                Please select a field and value to filter entries.\n              </Typography>\n            </Box>\n          ) : (\n            <SortModalBody\n              entriesFetchState={entriesFetchState}\n              mainField={mainField}\n              contentType={contentType}\n              handleDragEnd={handleDragEnd}\n              disabled={isSubmitting}\n            />\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Modal.Close>\n            <Button variant=\"tertiary\">\n              <FormattedMessage id={prefixKey('cancel-button.title')} />\n            </Button>\n          </Modal.Close>\n          <Button\n            type=\"submit\"\n            onClick={handleSubmit}\n            disabled={isSubmitButtonDisabled}\n            loading={isSubmitButtonLoading}\n          >\n            <FormattedMessage id={prefixKey('submit-button.title')} />\n          </Button>\n        </Modal.Footer>\n      </Modal.Content>\n    </Modal.Root>\n  );\n};\n\nexport default SortModal;\n","// https://docs.strapi.io/dev-docs/migration/v4-to-v5/additional-resources/helper-plugin#usecmeditviewdatamanager\nimport { unstable_useContentManagerContext as useContentManagerContext } from '@strapi/strapi/admin';\n\nimport { Button } from '@strapi/design-system';\n\nimport { config } from '../../config';\nimport SortModal from '../SortModal';\n\n//\n// Components\n//\n\n/**\n * Returns the `<SortModal />` component if needed, meaning the current content type\n * supports sorting the entries and is correctly configured. Otherwise returns `null`.\n */\nconst SortModalContainer = () => {\n  const { contentType, layout } = useContentManagerContext();\n  if (!contentType) {\n    return null;\n  }\n\n  const { attributes } = contentType;\n  if (!(config.sortOrderField in attributes)) {\n    return null;\n  }\n\n  const sortOrderFieldAttributes = attributes[config.sortOrderField];\n  if (sortOrderFieldAttributes.type !== 'integer') {\n    console.warn(`${config.sortOrderField} needs to be of type integer.`);\n    return null;\n  }\n\n  const { uid } = contentType;\n  const { mainField } = layout.list.settings;\n\n  return (\n    <>\n      {/* Legacy global sort modal (existing behaviour) â€“ icon only */}\n      <SortModal uid={uid} mainField={mainField} contentType={contentType} mode=\"global\" />\n      {/* New scoped sort modal: reindexes sortOrder only within the currently active filters */}\n      <SortModal\n        uid={uid}\n        mainField={mainField}\n        contentType={contentType}\n        mode=\"scoped\"\n        label=\"Scoped sort (by filters)\"\n      />\n    </>\n  );\n};\n\nexport default SortModalContainer;\n","import { PLUGIN_ID } from './pluginId';\nimport Initializer from './components/Initializer';\nimport SortModalContainer from './components/SortModalContainer';\n\n/**\n * The view of the injection zone.\n *\n * - See also: https://docs.strapi.io/cms/plugins-development/admin-panel-api#using-predefined-injection-zones\n */\nconst enum InjectionZoneView {\n  editView = 'editView',\n  listView = 'listView',\n}\n\n/**\n * The location of the injection zone.\n *\n * - Note: We're only using `listView` and therefore only specify the corresponding locations below.\n */\nconst enum InjectionZoneLocation {\n  /** Sits between Filters and the cogs icon. */\n  actions = 'actions',\n}\n\nexport default {\n  register(app: any) {\n    app.registerPlugin({\n      id: PLUGIN_ID,\n      initializer: Initializer,\n      isReady: false,\n      name: PLUGIN_ID,\n    });\n  },\n\n  bootstrap(app: any) {\n    app\n      .getPlugin('content-manager')\n      .injectComponent(InjectionZoneView.listView, InjectionZoneLocation.actions, {\n        name: 'SortModalContainer',\n        Component: SortModalContainer,\n      });\n  },\n\n  async registerTrads({ locales }: { locales: string[] }) {\n    return Promise.all(\n      locales.map(async (locale) => {\n        try {\n          const { default: data } = await import(`./translations/${locale}.json`);\n\n          return { data, locale };\n        } catch {\n          return { data: {}, locale };\n        }\n      })\n    );\n  },\n};\n"],"names":["config","FetchStatus","SortableListComponent","isSystemField","entriesFetchState","useContentManagerContext"],"mappings":"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","x_google_ignoreList":[5,6]}